(()=>{"use strict";chrome.runtime.onMessage.addListener((e,t,a)=>"SUMMARIZE_TOS"===e.type&&(console.log("[ClearTerms] Received SUMMARIZE_TOS message",e),fetch("http://localhost:3000/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e.text})}).then(e=>e.json()).then(e=>{const t=e.candidates&&e.candidates[0]&&e.candidates[0].content&&e.candidates[0].content.parts&&e.candidates[0].content.parts[0]&&e.candidates[0].content.parts[0].text?e.candidates[0].content.parts[0].text:e.error?.message||"No summary available.";a({summary:t})}).catch(e=>{console.error("[ClearTerms] Error summarizing:",e),a({summary:"Error summarizing: "+(e?.message||e)})}),!0))})();